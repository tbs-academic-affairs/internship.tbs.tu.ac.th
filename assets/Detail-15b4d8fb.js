import{a as y,r as _,l as b,u as D,o as S,f as B,b as C,d as R,e,t as i,g as V,j as U,k,w as a,v as l}from"./index-6b9654e3.js";import{s as p,d as u,b as v,J as $,o as j,u as I}from"./firebaseConfig-bb59ec2d.js";import{S as m}from"./sweetalert2.all-b80a5553.js";const T={class:"grow mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-6"},A={class:"flex justify-between items-center"},M={class:"text-[32px] font-medium"},N={class:"flex gap-2"},E=e("button",{type:"button",class:"border rounded px-3 py-2 min-w-[100px] border-gray-500 text-gray-500 hover:bg-gray-500 hover:text-white"}," Edit ",-1),F={class:"grid grid-cols-1 gap-4 mt-4"},J={class:"p-6 shadow grid grid-cols-12"},Y={class:"grid grid-cols-12 items-center gap-4"},q=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"ชื่อบริษัท :",-1),z={class:"grid grid-cols-12 items-center gap-4"},G=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"คำบรรยาย :",-1),H={class:"grid grid-cols-12 items-center gap-4"},K=e("div",{class:"col-span-12 lg:col-span-2 text-end"}," ระยะเวลาฝึกงาน : ",-1),L={class:"col-span-12 lg:col-span-2 flex items-center gap-4"},O=e("span",null,"-",-1),P={class:"grid grid-cols-12 items-center gap-4"},Q=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"ตำแหน่ง :",-1),W=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"ตำแหน่ง (2):",-1),X=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"ตำแหน่ง (3):",-1),Z={class:"grid grid-cols-12 gap-4"},ee=e("div",{class:"col-span-12 lg:col-span-2 text-end"},"รายละเอียด :",-1),te={class:"grid grid-cols-12 items-center gap-4"},oe=e("div",{class:"col-span-12 lg:col-span-2 text-end"}," ช่องทางติดต่อบริษัท : ",-1),de={__name:"Detail",setup(se){const g=y();_(new Date);const t=_({company_name:"",description:"",start_date:new Date,end_date:new Date,role1:"",role2:"",role3:"",job_description:"",company_contact:""}),f=b(),r=D(),c=f.params.newsId,x=async()=>{console.log("> fetch from news_id: ",c);const n=p(u,"news"),o=v(n,c),d=await $(o);if(d.exists()){const s=d.data();console.log("Fetched data:",s),t.value={...s,start_date:new Date(s.start_date.seconds*1e3),end_date:new Date(s.end_date.seconds*1e3)}}else console.log("No document found with the specified id.")},h=()=>{m.fire({title:"คุณต้องการลบข้อมูลนี้ใช่หรือไม่?",text:"ข้อมูลที่ถูกลบจะไม่สามารถกู้คืนได้",icon:"warning",showCancelButton:!0,confirmButtonText:"ลบข้อมูล",confirmButtonColor:"#dc3545",cancelButtonText:"ยกเลิก",cancelButtonColor:"#6c757d"}).then(async n=>{if(n.isConfirmed){const o=p(u,"news"),d=v(o,c);await j(d),m.fire({title:"ลบข้อมูลสำเร็จ",text:"ข้อมูลของคุณถูกลบเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ตกลง",confirmButtonColor:"#28a745"}),r.push({name:"Admin"})}})},w=async n=>{n.preventDefault();const o=await I(p(u,"news"),t.value);console.log("Document written with ID:",o.id),m.fire({title:"บันทึกข้อมูลสำเร็จ",text:"ข้อมูลของคุณถูกบันทึกเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ตกลง",confirmButtonColor:"#28a745"}),r.push({name:"Admin"})};return S(()=>{console.log("news detail mounted");const n=g.getters.getAuth.username,o=g.getters.getAuth.role;n&&o==="admin"?x():r.push({name:"Index"})}),(n,o)=>{const d=B("router-link");return C(),R("div",T,[e("div",A,[e("span",M,i(t.value.company_name),1),e("div",N,[e("button",{type:"button",class:"border rounded px-3 py-2 min-w-[100px] border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:h}," Remove "),V(d,{to:{name:"EditNews",params:{newsId:k(c)}}},{default:U(()=>[E]),_:1},8,["to"])])]),e("div",F,[e("div",J,[e("form",{onSubmit:w,class:"col-span-12 flex flex-col gap-2"},[e("div",Y,[q,a(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>t.value.company_name=s),type:"text",class:"col-span-12 lg:col-span-10 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.company_name]])]),e("div",z,[G,a(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>t.value.description=s),type:"text",class:"col-span-12 lg:col-span-10 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.description]])]),e("div",H,[K,e("span",null,i(`${(t.value.start_date.getMonth()+1).toString().padStart(2,"0")}/${t.value.start_date.getDate().toString().padStart(2,"0")}/${t.value.start_date.getFullYear()}`),1),e("div",L,[O,e("span",null,i(`${(t.value.end_date.getMonth()+1).toString().padStart(2,"0")}/${t.value.end_date.getDate().toString().padStart(2,"0")}/${t.value.end_date.getFullYear()}`),1)])]),e("div",P,[Q,a(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>t.value.role1=s),type:"text",class:"col-span-12 lg:col-span-2 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.role1]]),W,a(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>t.value.role2=s),type:"text",class:"col-span-12 lg:col-span-2 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.role2]]),X,a(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>t.value.role3=s),type:"text",class:"col-span-12 lg:col-span-2 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.role3]])]),e("div",Z,[ee,a(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=s=>t.value.job_description=s),class:"col-span-12 lg:col-span-10 outline-none p-2 cursor-default",rows:"6",readonly:""},null,512),[[l,t.value.job_description]])]),e("div",te,[oe,a(e("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>t.value.company_contact=s),type:"text",class:"col-span-12 lg:col-span-10 outline-none p-2 cursor-default",readonly:""},null,512),[[l,t.value.company_contact]])])],32)])])])}}};export{de as default};
