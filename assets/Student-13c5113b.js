import{u as P,a as R,r as b,o as E,f as A,b as r,d as u,e,t as m,n as _,w as n,v as i,g as w,h as v,F as f,i as x}from"./index-4b67ce23.js";import{S as D}from"./sweetalert2.all-074a6d45.js";import{s as U,d as I,a as V,_ as q,t as C,u as F,r as O}from"./firebaseConfig-bb59ec2d.js";const $={class:"grow mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-6"},M={class:"text-[32px] font-medium"},j={class:"mt-4 border rounded"},z={class:"flex flex-wrap -mb-px text-sm font-medium text-center",role:"tablist"},L={role:"presentation"},G={role:"presentation"},H={class:"grid grid-cols-12 gap-2 items-center"},J=e("span",{class:"col-span-12 lg:col-span-2"},"ชื่อบริษัท :",-1),K={class:"grid grid-cols-12 gap-2 items-center"},Q=e("span",{class:"col-span-12 lg:col-span-2"},"ตำแหน่ง :",-1),W={class:"grid grid-cols-12 gap-2 items-center"},X=e("span",{class:"col-span-12 lg:col-span-2"},"ระยะเวลาที่เข้ารับการฝึกงาน :",-1),Y=e("span",{class:"col-span-12 lg:col-span-2 text-center"},"ถึง",-1),Z=e("span",{class:"text-[20px] mt-4"},"ข้อมูลผู้ประสานงานของบริษัท",-1),ee={class:"grid grid-cols-12 gap-2 items-center"},te=e("span",{class:"col-span-12 lg:col-span-2"},"ชื่อ นามสกุล :",-1),se={class:"grid grid-cols-12 gap-2 items-center"},ae=e("span",{class:"col-span-12 lg:col-span-2"},"ตำแหน่ง :",-1),oe={class:"grid grid-cols-12 gap-2 items-center"},ne=e("span",{class:"col-span-12 lg:col-span-2"},"เบอร์โทรศัพท์ :",-1),le={class:"grid grid-cols-12 gap-2 items-center"},ce=e("span",{class:"col-span-12 lg:col-span-2"},"E-mail :",-1),de=e("button",{type:"reset",class:"w-[132px] h-[46px] rounded bg-[#ACB0B8] text-white"},"Cancel",-1),ie=e("button",{type:"submit",class:"w-[132px] h-[46px] rounded bg-[#3694ED] text-white"},"Save",-1),pe={class:"grid grid-cols-12 gap-2 items-center"},re=e("span",{class:"col-span-12 lg:col-span-2"},"ชื่อบริษัท (ลำดับที่ 1) :",-1),ue={class:"grid grid-cols-12 gap-2 items-center"},me=e("span",{class:"col-span-12 lg:col-span-2"},"สถานะปัจจุบัน :",-1),_e=["value"],ge={class:"grid grid-cols-12 gap-2 items-center"},ye=e("span",{class:"col-span-12 lg:col-span-2"},"ชื่อบริษัท (ลำดับที่ 2) :",-1),be={class:"grid grid-cols-12 gap-2 items-center"},ve=e("span",{class:"col-span-12 lg:col-span-2"},"สถานะปัจจุบัน :",-1),fe=["value"],xe={class:"grid grid-cols-12 gap-2 items-center"},he=e("span",{class:"col-span-12 lg:col-span-2"},"ชื่อบริษัท (ลำดับที่ 3) :",-1),we={class:"grid grid-cols-12 gap-2 items-center"},De=e("span",{class:"col-span-12 lg:col-span-2"},"สถานะปัจจุบัน :",-1),Ue=["value"],Ie=e("div",{class:"flex justify-center gap-4 mt-6"},[e("button",{type:"reset",class:"w-[132px] h-[46px] rounded bg-[#ACB0B8] text-white"},"Cancle"),e("button",{type:"submit",class:"w-[132px] h-[46px] rounded bg-[#3694ED] text-white"},"Save")],-1),Te={__name:"Student",setup(Ve){const S=P(),g=R(),l=g.getters.getAuth,d=b("ฟอร์มข้อมูลนักศึกษาฝึกงาน"),h=b(new Date),s=b({tab1:{confirmed_company:"",confirmed_role:"",start_date:"",end_date:"",company_coname:"",company_coRole:"",company_cotel:"",company_coemail:"",sNameT:l.student.sNameT||"-",slNameT:l.student.slNameT||"-",stU_ID:l.student.stU_ID||"-"},tab2:{company1:"",company1_status:"Pending Interview",company2:"",company2_status:"Pending Interview",company3:"",company3_status:"Pending Interview"},companyStatusOptions:[{value:"-",label:"-"},{value:"Pending Interview",label:"Pending Interview"},{value:"Pending Confirm",label:"Pending Confirm"}],intern_status:!1}),T=async()=>{const o=U(I,"student_info"),a=V(o,q("stU_ID","==",l.student.stU_ID)),p=await C(a);if(p.empty)console.log("No document found with the specified stU_ID");else{const t=p.docs[0].data();console.log("Fetched data:",t),s.value={...s.value,tab1:{confirmed_company:t.confirmed_company||"",confirmed_role:t.confirmed_role||"",start_date:new Date(t.start_date.seconds*1e3)||"",end_date:new Date(t.end_date.seconds*1e3)||"",company_coname:t.company_coname||"",company_coRole:t.company_coRole||"",company_cotel:t.company_cotel||"",company_coemail:t.company_coemail||"",sNameT:l.student.sNameT||"-",slNameT:l.student.slNameT||"-",stU_ID:l.student.stU_ID||"-"},tab2:{company1:t.company1||"",company1_status:t.company1_status||"-",company2:t.company2||"",company2_status:t.company2_status||"-",company3:t.company3||"",company3_status:t.company3_status||"-"},intern_status:t.intern_status||!1}}},y=async()=>{const o=U(I,"student_info"),a=V(o,q("stU_ID","==",l.student.stU_ID)),p=await C(a),t={...s.value.tab1,...s.value.tab2,intern_status:s.value.intern_status};if(console.log("data",t),p.empty){const c=await F(o,t);console.log("New document created with ID:",c.id)}else{const c=p.docs[0];await O(c.ref,t),console.log("Existing document updated with ID:",c.id)}D.fire({title:"บันทึกข้อมูลสำเร็จ",text:"ข้อมูลของคุณถูกบันทึกเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ตกลง",confirmButtonColor:"#28a745"})},N=o=>{o.preventDefault(),console.log("submit tab1",d),s.value.intern_status=!0,y()},k=o=>{o.preventDefault(),console.log("submit tab2",d),s.value.intern_status=!1,y()},B=async()=>{(await D.fire({title:"ยืนยันการลบข้อมูล",text:"คุณต้องการลบข้อมูลทั้งหมดใช่หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"})).isConfirmed&&(s.value={...s.value,tab1:{confirmed_company:"",confirmed_role:"",start_date:"",end_date:"",company_coname:"",company_coRole:"",company_cotel:"",company_coemail:"",sNameT:l.student.sNameT||"-",slNameT:l.student.slNameT||"-",stU_ID:l.student.stU_ID||"-"},tab2:{company1:"",company1_status:"Pending Interview",company2:"",company2_status:"Pending Interview",company3:"",company3_status:"Pending Interview"},intern_status:!1},y())};return E(()=>{console.log("student mounted");const o=g.getters.getAuth.username,a=g.getters.getAuth.role;o&&a==="student"?T():S.push({name:"Index"})}),(o,a)=>{const p=A("VueDatePicker");return r(),u("div",$,[e("span",M,m(d.value),1),e("div",j,[e("ul",z,[e("li",L,[e("button",{class:_(["inline-block p-4 border",`${d.value==="ฟอร์มข้อมูลนักศึกษาฝึกงาน"?"bg-gray-50":""}`]),type:"button",role:"tab",onClick:a[0]||(a[0]=()=>{d.value="ฟอร์มข้อมูลนักศึกษาฝึกงาน"})}," สำหรับนักศึกษาที่มีสถานที่ฝึกงานรองรับ ",2)]),e("li",G,[e("button",{class:_(["inline-block p-4 border",`${d.value==="ข้อมูลนักศึกษาฝึกงาน"?"bg-gray-50":""}`]),type:"button",role:"tab",onClick:a[1]||(a[1]=()=>{d.value="ข้อมูลนักศึกษาฝึกงาน"})}," สำหรับนักศึกษาที่ติดต่อเข้ารับการฝึกงานด้วยตนเอง ",2)])])]),e("div",null,[e("div",{class:_(`${d.value!=="ฟอร์มข้อมูลนักศึกษาฝึกงาน"&&"hidden"} p-8 shadow`),role:"tabpanel"},[e("form",{onSubmit:N,class:"grid grid-cols-1 gap-4"},[e("div",H,[J,n(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.tab1.confirmed_company=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.confirmed_company]])]),e("div",K,[Q,n(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.tab1.confirmed_role=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.confirmed_role]])]),e("div",W,[X,w(p,{modelValue:s.value.tab1.start_date,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.tab1.start_date=t),"enable-time-picker":!1,"min-date":h.value,"auto-apply":!0,locale:"th",class:"col-span-12 lg:col-span-3",required:""},null,8,["modelValue","min-date"]),Y,w(p,{modelValue:s.value.tab1.end_date,"onUpdate:modelValue":a[5]||(a[5]=t=>s.value.tab1.end_date=t),"enable-time-picker":!1,"min-date":h.value,"auto-apply":!0,locale:"th",class:"col-span-12 lg:col-span-3",required:""},null,8,["modelValue","min-date"])]),Z,e("div",ee,[te,n(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>s.value.tab1.company_coname=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.company_coname]])]),e("div",se,[ae,n(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>s.value.tab1.company_coRole=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.company_coRole]])]),e("div",oe,[ne,n(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>s.value.tab1.company_cotel=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.company_cotel]])]),e("div",le,[ce,n(e("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>s.value.tab1.company_coemail=t),type:"email",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab1.company_coemail]])]),e("div",{class:"flex justify-center gap-4 mt-6"},[e("button",{type:"button",class:"w-[132px] h-[46px] rounded bg-[#ED3537] text-white",onClick:B}," Clear "),de,ie])],32)],2),e("div",{class:_(`${d.value!=="ข้อมูลนักศึกษาฝึกงาน"&&"hidden"} p-8 shadow`),role:"tabpanel"},[e("form",{onSubmit:k,class:"grid grid-cols-1 gap-4"},[e("div",pe,[re,n(e("input",{"onUpdate:modelValue":a[10]||(a[10]=t=>s.value.tab2.company1=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab2.company1]])]),e("div",ue,[me,n(e("select",{"onUpdate:modelValue":a[11]||(a[11]=t=>s.value.tab2.company1_status=t),class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},[(r(!0),u(f,null,x(s.value.companyStatusOptions,(t,c)=>(r(),u("option",{value:t.value,key:c},m(t.label),9,_e))),128))],512),[[v,s.value.tab2.company1_status]])]),e("div",ge,[ye,n(e("input",{"onUpdate:modelValue":a[12]||(a[12]=t=>s.value.tab2.company2=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab2.company2]])]),e("div",be,[ve,n(e("select",{"onUpdate:modelValue":a[13]||(a[13]=t=>s.value.tab2.company2_status=t),class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},[(r(!0),u(f,null,x(s.value.companyStatusOptions,(t,c)=>(r(),u("option",{value:t.value,key:c},m(t.label),9,fe))),128))],512),[[v,s.value.tab2.company2_status]])]),e("div",xe,[he,n(e("input",{"onUpdate:modelValue":a[14]||(a[14]=t=>s.value.tab2.company3=t),type:"text",class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},null,512),[[i,s.value.tab2.company3]])]),e("div",we,[De,n(e("select",{"onUpdate:modelValue":a[15]||(a[15]=t=>s.value.tab2.company3_status=t),class:"col-span-12 lg:col-span-4 border rounded p-2",required:""},[(r(!0),u(f,null,x(s.value.companyStatusOptions,(t,c)=>(r(),u("option",{value:t.value,key:c},m(t.label),9,Ue))),128))],512),[[v,s.value.tab2.company3_status]])]),Ie],32)],2)])])}}};export{Te as default};
